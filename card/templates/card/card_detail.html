{% extends 'card/base.html' %}
{% load static %}

{% block js %}
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  {{ card.pk|json_script:'card-pk' }}
  <script defer src="{% static 'card/js/card.js' %}"></script>
{% endblock js %}
{% block content %}
  {% with card.user as user %}
    <nav class="container mx-auto flex justify-between items-center h-16">
      <img class="h-8 md:h-10" src="{% if card.logo %}{{ card.logo.url }}{% else %}{% static 'card/img/logo.svg' %}{% endif %}" />
      <div>
        <button data-text="{{ card_url }}" class="bg-primary text-white rounded-full mx-1 px-2 py-1 text-sm inline-flex items-center copy-to-clipboard">
          <span class="material-icons text-sm md:mr-1">link</span>
          <span class="hidden md:inline">Link</span>
        </button>
        <a href="whatsapp://send?text={{ request.scheme }}://{{ request.get_host }}{{ request.get_full_path }}">
          <button class="bg-primary text-white rounded-full mx-1 px-2 py-1 text-sm inline-flex items-center">
            <span class="material-icons md:mr-1 text-sm">reply</span>
            <span class="hidden md:inline" >Compartir</span>
          </button>
        </a>
      </div>
    </nav>
    <div
      id="nav-menu"
      x-data="menuData"
      class="fixed left-auto md:left-3 bottom-0 md:bottom-auto md:top-1/2 md:-translate-y-1/2 
            flex justify-around items-center md:flex-col w-full md:w-auto
            bg-primary py-2 md:rounded-md h-16 md:h-auto z-50"
    >
      <a href="#home" @click="onClick" class="material-icons text-white text-4xl">home</a>
      <a href="#contact" @click="onClick" class="material-icons text-white text-4xl">email</a>
    </div>
    <main id="main-wrapper" class="h-screen-calc-tray md:h-screen-calc w-screen overflow-y-auto bg-gray-200" x-data="pageData">
      <section x-show="page == '#home'" x-transition id="home" class="h-screen-calc">
        <div class="splide">
          <div class="splide__track">
            <ul class="splide__list">
              {% if card.background %}
                <li class="splide__slide">
                  <img class="w-full" src="{{ card.background.url }}" />
                </li>
              {% endif %}
              <li class="splide__slide">
                <img class="w-full" src="{% static 'card/img/banner-alambre.png' %}" />
              </li>
              <li class="splide__slide">
                <img class="w-full" src="{% static 'card/img/banner-clavos.png' %}" />
              </li>
            </ul>
          </div>
        </div>
        <div class="w-60 h-60 rounded-full bg-red-400 mx-auto -translate-y-1/2"></div>
        <p class="container mx-auto py-4 w-full md:w-1/2 text-center -mt-24">
          {{ card.description }}
        </p>
        <div class="flex w-1/2 mx-auto">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3902.839169311068!2d-77.12840208459409!3d-11.98562824403094!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105cdb805a6c3cb%3A0xf96e286e99869177!2sPRODAC!5e0!3m2!1sen!2spe!4v1636586654915!5m2!1sen!2spe" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
          <div>
            {% if card.facebook %}
              <div class="flex items-center">
                <img class="w-7 mr-2" src="{% static 'icons/facebook.svg' %}" alt="facebook icon">
                {{ card.facebook }}
              </div>
            {% endif %}
            <div class="flex items-center">
              <a class="material-icons text-gray-500 text-4xl mr-2">email</a>
              {{ card.user.email }}
            </div>
          </div>
        </div>
        <div class="h-14"></div>
      </section>
      <section x-show="page == '#contact'" x-transition class="min-h-screen-calc">
        <div class="h-14 md:h-0"></div>
        <div class="container mx-auto md:flex items-center min-h-screen-calc">
          <div class="w-full flex justify-center items-center">
            <div>
              <div>
                <span class="text-white bg-primary px-3 py-1 rounded-full">Contact√©monos</span>
              </div>
              <p><span class="material-icons text-sm">call</span> {{ card.phone }}</p>
              <p><span class="material-icons text-sm">email</span> {{ card.user.email }}</p>
              <p><span class="material-icons text-sm">place</span> {{ card.address }}</p>
            </div>
          </div>
          <div class="w-full">
            {% url 'contact' card.pk as contact_url %}
            {% include 'components/form.html' with form=contact_form with_labels="true" method='POST' form_class='bg-transparent shadow-none' action=contact_url %}
          </div>
        </div>
        <div class="h-14 md:h-0">
        </div>
      </section>
    </main>
  {% endwith %}
{% endblock content %}

{% comment %} <div class="px-5 flex flex-col items-center justify-center h-1/2 my-16">
          <div class="flex flex-col md:flex-row items-center backdrop-blur-lg rounded-md md:rounded-full px-4 py-2">
            <div>
              {% if card.logo %}
                <img class="w-24 h-24 md:w-40 md:h-40 rounded-full mx-auto" src="{{ user.logo.url }}" alt="">
              {% endif %}
            </div>
            <div class="md:mx-10 text-center">
              {% if card.phone %}
                <a
                  href="tel:{{ card.phone }}"
                  class="font-semibold text-white text-base mr-1 material-icons bg-primary w-8 h-8 inline-flex justify-center items-center rounded-full">phone</a>
              {% endif %}
              {% if user.email %}
                <a
                  href="mailto:{{ user.email }}"
                  class="font-semibold text-white text-base mr-1 material-icons bg-primary w-8 h-8 inline-flex justify-center items-center rounded-full">email</a>
              {% endif %}
              {% if card.whatsapp %}
                <a
                  href="https://wa.me/51{{ card.whatsapp }}" class="bg-primary rounded-full p-1 w-8 h-8 inline-flex justify-center items-center mt-1">
                  <img class="w-4" src="{% static 'icons/whatsapp.svg' %}" />
                </a>
              {% endif %}
              <h6 class="text-white uppercase">{{ card.name }}</h6>
            </div>
          </div>
        </div> {% endcomment %}